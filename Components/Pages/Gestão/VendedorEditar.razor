@page "/Vendedores/Editar/{id}"
@using Big.Models
@inject NavigationManager Navigation
@rendermode InteractiveServer

<h3><i class="bi bi-person-badge"></i> Editar Usuário</h3>

@if (usuario == null)
{
    <p>Carregando usuário...</p>
}
else
{
    <EditForm Model="@usuario" OnValidSubmit="SalvarAlteracoes">
        <DataAnnotationsValidator />

        <div class="mb-3">
            <label class="form-label">Nome Completo:</label>
            <InputText class="form-control" @bind-Value="usuario.NomeCompleto" />
        </div>

        <div class="mb-3">
            <label class="form-label">Email:</label>
            <InputText class="form-control" @bind-Value="usuario.Email" Disabled="true" />
        </div>

        <div class="mb-3">
            <label class="form-label">CPF:</label>
            <InputText class="form-control" @bind-Value="usuario.CPF" />
        </div>

        <div class="mb-3">
            <label class="form-label">Endereço:</label>
            <InputText class="form-control" @bind-Value="usuario.Endereco" />
        </div>

        <div class="mb-3">
            <label class="form-label">Cargo:</label>
            <InputSelect class="form-control" @bind-Value="usuario.RoleAdicional">
                <option value="Gerente">Gerente</option>
                <option value="Vendedor">Vendedor</option>
                <option value="Atendente">Atendente</option>
                <option value="Financeiro">Financeiro</option>
                <option value="TI">TI</option>
            </InputSelect>
        </div>
        
        <div class="mb-3">
            <button type="submit" class="btn btn-success">Salvar</button>
            <button type="button" class="btn btn-danger" @onclick="ResetarSenha">Resetar Senha</button>
            <a href="/Usuarios" class="btn btn-secondary">Cancelar</a>
        </div>
    </EditForm>
}

@code {
    [Parameter] public string id { get; set; }
    private ApplicationUser usuario;

    protected override void OnInitialized()
    {
        usuario = new ApplicationUser
        {
            Id = id,
            NomeCompleto = "Usuário Mockado",
            Email = "usuario@email.com",
            CPF = "000.000.000-00",
            Endereco = "Rua Exemplo, 123",
            RoleAdicional = "Vendedor",
            
        };
    }

    private void SalvarAlteracoes()
    {
        Console.WriteLine("Usuário atualizado!");
        Navigation.NavigateTo("/Usuarios");
    }

    private void ResetarSenha()
    {
        Console.WriteLine("Senha resetada!");
    }
}
